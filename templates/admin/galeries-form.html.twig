{% extends 'base.html.twig' %}
{% block title %}
	{{titre}}
{% endblock %}
{% block body %}


	<h1 class="titre">
		<i class="fa-regular fa-images"></i>
		{{titre}}</h1>

	<form id="form-galerie" method="POST">
		<div class="speed-dial">
			<div class="speed-dial__options">

				<div class="speed-dial-button">
					<button class="btn-enregistrer" type="submit">
						<i class="fa-solid fa-download"></i>
					</button>
					<span class="button-label">Enregistrer</span>
				</div>

				<div class="speed-dial-button btn-visionneuse-galeries">
					<a href="{{path('galeries_visionneuse_galeries')}}" class="speed-dial__link">
						<i class="fa-regular fa-eye"></i>
					</a>
					<span class="button-label">Visionneuse galeries</span>
				</div>
				<div class="speed-dial-button btn-revenir-liste-galeries">
					<a href="{{path('galeries_liste_galeries')}}" class="speed-dial__link">
						<i class="fa-solid fa-file-lines"></i>
					</a>
					<span class="button-label">Revenir à la liste de galeries</span>
				</div>
			</div>
		</div>

		{{ form_start(form) }}
		<div class="container-switch">{{ form_row(form.is_active) }}</div>
		<p class="titre-galerie">{{ form_row(form.titre) }}</p>
		{{ form_errors(form.titre) }}		
			{{ form_row(form.type) }}
			<div id="editor">
				{{ form_row(form.description|raw) }}
			</div>
			{{ form_row(form.tags) }}
	
		{# {{ form_row(form.created_at)}} #}

		{# paramètres galerie d'images #}
		<h2 class="titre centered">Galerie d'images</h2>
		<span class="images-count">
			{% if galerie.images|length ==0 %}
				<span class="centered alert">Il n'existe encore aucune image dans cette galerie (pensez à sauvegarder pour rafraichir la galerie.)</span>
			{% else %}
				<span class="centered success">{{galerie.images|length}}
					images enregistrées.</span>
			{% endif %}
		</span>
		<div class="toggler-slide-up-down centered">
			<i class="fa-solid fa-sliders"></i>Options galerie</div>
		<div class="parametres-galerie">
			<div class="inputs-galerie">
				{{ form_row(form.primary_background_color) }}
				{{form_row(form.gallery_width)}}
				{{form_row(form.gallery_gap)}}
				{{form_row(form.gallery_max_columns)}}
				{{form_row(form.gallery_height)}}
				{{ form_row(form.images_border_radius) }}
				{{form_row(form.images_border_width)}}
				{{form_row(form.images_shadow)}}
			</div>
			<div class="inputs-carousel">
				{{ form_row(form.carousel_speed) }}
				{{ form_row(form.carousel_transition) }}
			</div>
		</div>

		{# {{ form_rest(form) }} #}
		{# {{include('_partials/_multi-select-tags.html.twig')}} #}
		{{ include('admin/importer-images-form.html.twig') }}
		{{ form_row(form.images) }}

		{# Container images rempli en JS #}
		<div class="container-galerie" data-id={{galerie.id}}></div>
		{{ form_end(form) }}
	</form>
	{# Lightbox images #}
	{{ include('_partials/_lightbox.html.twig') }}

	{% block javascripts %}
		<script src="{{asset('assets/js/images.js')}}" type="module" defer></script>
		<script src="{{asset('assets/js/galeries.js')}}" type="module" defer></script>
		<script src="{{asset('assets/js/lightbox.js')}}" type="module" defer></script>
		<script src="{{asset('assets/js/galeries-parameters.js')}}" type="module" defer></script>
		<script type="module" src="{{asset('assets/js/ckeditor5init.js')}}" defer></script>
		<script type="module" src="{{asset('ckeditor5/ckeditor5.js')}}" defer></script>
	{% endblock %}
{% endblock %}
